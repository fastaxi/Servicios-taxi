{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        const response = await axios.default.post(`${API_URL}/auth/login`, {\n          username,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        console.error('Login error:', error);\n        throw new Error(error.response?.data?.detail || 'Error al iniciar sesiÃ³n');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":97,"map":[[13,2,25,0,"exports"],[13,9,25,0],[13,10,25,0,"AuthProvider"],[13,22,25,0],[13,25,25,0,"AuthProvider"],[13,37,25,0],[14,2,88,0,"exports"],[14,9,88,0],[14,10,88,0,"useAuth"],[14,17,88,0],[14,20,88,0,"useAuth"],[14,27,88,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,3,26],[20,6,3,26,"_reactJsxDevRuntime"],[20,25,3,26],[20,28,3,26,"require"],[20,35,3,26],[20,36,3,26,"_dependencyMap"],[20,50,3,26],[21,2,6,0],[21,8,6,6,"API_URL"],[21,15,6,13],[21,18,6,16,"process"],[21,25,6,23],[21,26,6,24,"env"],[21,29,6,27],[21,30,6,28,"EXPO_PUBLIC_BACKEND_URL"],[21,53,6,51],[21,56,6,54],[21,62,6,60],[22,2,23,0],[22,8,23,6,"AuthContext"],[22,19,23,17],[22,35,23,20],[22,39,23,20,"createContext"],[22,45,23,33],[22,46,23,33,"createContext"],[22,59,23,33],[22,61,23,63,"undefined"],[22,70,23,72],[22,71,23,73],[23,2,25,7],[23,11,25,16,"AuthProvider"],[23,23,25,28,"AuthProvider"],[23,24,25,29],[24,4,25,31,"children"],[25,2,25,71],[25,3,25,72],[25,5,25,74],[26,4,26,2],[26,10,26,8],[26,11,26,9,"user"],[26,15,26,13],[26,17,26,15,"setUser"],[26,24,26,22],[26,25,26,23],[26,28,26,26],[26,32,26,26,"useState"],[26,38,26,34],[26,39,26,34,"useState"],[26,47,26,34],[26,49,26,48],[26,53,26,52],[26,54,26,53],[27,4,27,2],[27,10,27,8],[27,11,27,9,"token"],[27,16,27,14],[27,18,27,16,"setToken"],[27,26,27,24],[27,27,27,25],[27,30,27,28],[27,34,27,28,"useState"],[27,40,27,36],[27,41,27,36,"useState"],[27,49,27,36],[27,51,27,52],[27,55,27,56],[27,56,27,57],[28,4,28,2],[28,10,28,8],[28,11,28,9,"loading"],[28,18,28,16],[28,20,28,18,"setLoading"],[28,30,28,28],[28,31,28,29],[28,34,28,32],[28,38,28,32,"useState"],[28,44,28,40],[28,45,28,40,"useState"],[28,53,28,40],[28,55,28,41],[28,59,28,45],[28,60,28,46],[29,4,30,2],[29,8,30,2,"useEffect"],[29,14,30,11],[29,15,30,11,"useEffect"],[29,24,30,11],[29,26,30,12],[29,32,30,18],[30,6,31,4,"loadStoredAuth"],[30,20,31,18],[30,21,31,19],[30,22,31,20],[31,4,32,2],[31,5,32,3],[31,7,32,5],[31,9,32,7],[31,10,32,8],[32,4,34,2],[32,10,34,8,"loadStoredAuth"],[32,24,34,22],[32,27,34,25],[32,33,34,25,"loadStoredAuth"],[32,34,34,25],[32,39,34,37],[33,6,35,4],[33,10,35,8],[34,8,36,6],[34,14,36,12,"storedToken"],[34,25,36,23],[34,28,36,26],[34,34,36,32,"AsyncStorage"],[34,46,36,44],[34,47,36,44,"default"],[34,54,36,44],[34,55,36,45,"getItem"],[34,62,36,52],[34,63,36,53],[34,70,36,60],[34,71,36,61],[35,8,37,6],[35,14,37,12,"storedUser"],[35,24,37,22],[35,27,37,25],[35,33,37,31,"AsyncStorage"],[35,45,37,43],[35,46,37,43,"default"],[35,53,37,43],[35,54,37,44,"getItem"],[35,61,37,51],[35,62,37,52],[35,68,37,58],[35,69,37,59],[36,8,39,6],[36,12,39,10,"storedToken"],[36,23,39,21],[36,27,39,25,"storedUser"],[36,37,39,35],[36,39,39,37],[37,10,40,8,"setToken"],[37,18,40,16],[37,19,40,17,"storedToken"],[37,30,40,28],[37,31,40,29],[38,10,41,8,"setUser"],[38,17,41,15],[38,18,41,16,"JSON"],[38,22,41,20],[38,23,41,21,"parse"],[38,28,41,26],[38,29,41,27,"storedUser"],[38,39,41,37],[38,40,41,38],[38,41,41,39],[39,8,42,6],[40,6,43,4],[40,7,43,5],[40,8,43,6],[40,15,43,13,"error"],[40,20,43,18],[40,22,43,20],[41,8,44,6,"console"],[41,15,44,13],[41,16,44,14,"error"],[41,21,44,19],[41,22,44,20],[41,43,44,41],[41,45,44,43,"error"],[41,50,44,48],[41,51,44,49],[42,6,45,4],[42,7,45,5],[42,16,45,14],[43,8,46,6,"setLoading"],[43,18,46,16],[43,19,46,17],[43,24,46,22],[43,25,46,23],[44,6,47,4],[45,4,48,2],[45,5,48,3],[46,4,50,2],[46,10,50,8,"login"],[46,15,50,13],[46,18,50,16],[46,24,50,16,"login"],[46,25,50,23,"username"],[46,33,50,39],[46,35,50,41,"password"],[46,43,50,57],[46,48,50,62],[47,6,51,4],[47,10,51,8],[48,8,52,6],[48,14,52,12,"response"],[48,22,52,20],[48,25,52,23],[48,31,52,29,"axios"],[48,36,52,34],[48,37,52,34,"default"],[48,44,52,34],[48,45,52,35,"post"],[48,49,52,39],[48,50,52,40],[48,53,52,43,"API_URL"],[48,60,52,50],[48,73,52,63],[48,75,52,65],[49,10,53,8,"username"],[49,18,53,16],[50,10,54,8,"password"],[51,8,55,6],[51,9,55,7],[51,10,55,8],[52,8,57,6],[52,14,57,12],[53,10,57,14,"access_token"],[53,22,57,26],[54,10,57,28,"user"],[54,14,57,32],[54,16,57,34,"userData"],[55,8,57,43],[55,9,57,44],[55,12,57,47,"response"],[55,20,57,55],[55,21,57,56,"data"],[55,25,57,60],[56,8,59,6],[56,14,59,12,"AsyncStorage"],[56,26,59,24],[56,27,59,24,"default"],[56,34,59,24],[56,35,59,25,"setItem"],[56,42,59,32],[56,43,59,33],[56,50,59,40],[56,52,59,42,"access_token"],[56,64,59,54],[56,65,59,55],[57,8,60,6],[57,14,60,12,"AsyncStorage"],[57,26,60,24],[57,27,60,24,"default"],[57,34,60,24],[57,35,60,25,"setItem"],[57,42,60,32],[57,43,60,33],[57,49,60,39],[57,51,60,41,"JSON"],[57,55,60,45],[57,56,60,46,"stringify"],[57,65,60,55],[57,66,60,56,"userData"],[57,74,60,64],[57,75,60,65],[57,76,60,66],[58,8,62,6,"setToken"],[58,16,62,14],[58,17,62,15,"access_token"],[58,29,62,27],[58,30,62,28],[59,8,63,6,"setUser"],[59,15,63,13],[59,16,63,14,"userData"],[59,24,63,22],[59,25,63,23],[60,6,64,4],[60,7,64,5],[60,8,64,6],[60,15,64,13,"error"],[60,20,64,23],[60,22,64,25],[61,8,65,6,"console"],[61,15,65,13],[61,16,65,14,"error"],[61,21,65,19],[61,22,65,20],[61,36,65,34],[61,38,65,36,"error"],[61,43,65,41],[61,44,65,42],[62,8,66,6],[62,14,66,12],[62,18,66,16,"Error"],[62,23,66,21],[62,24,66,22,"error"],[62,29,66,27],[62,30,66,28,"response"],[62,38,66,36],[62,40,66,38,"data"],[62,44,66,42],[62,46,66,44,"detail"],[62,52,66,50],[62,56,66,54],[62,81,66,79],[62,82,66,80],[63,6,67,4],[64,4,68,2],[64,5,68,3],[65,4,70,2],[65,10,70,8,"logout"],[65,16,70,14],[65,19,70,17],[65,25,70,17,"logout"],[65,26,70,17],[65,31,70,29],[66,6,71,4],[66,10,71,8],[67,8,72,6],[67,14,72,12,"AsyncStorage"],[67,26,72,24],[67,27,72,24,"default"],[67,34,72,24],[67,35,72,25,"removeItem"],[67,45,72,35],[67,46,72,36],[67,53,72,43],[67,54,72,44],[68,8,73,6],[68,14,73,12,"AsyncStorage"],[68,26,73,24],[68,27,73,24,"default"],[68,34,73,24],[68,35,73,25,"removeItem"],[68,45,73,35],[68,46,73,36],[68,52,73,42],[68,53,73,43],[69,8,74,6,"setToken"],[69,16,74,14],[69,17,74,15],[69,21,74,19],[69,22,74,20],[70,8,75,6,"setUser"],[70,15,75,13],[70,16,75,14],[70,20,75,18],[70,21,75,19],[71,6,76,4],[71,7,76,5],[71,8,76,6],[71,15,76,13,"error"],[71,20,76,18],[71,22,76,20],[72,8,77,6,"console"],[72,15,77,13],[72,16,77,14,"error"],[72,21,77,19],[72,22,77,20],[72,37,77,35],[72,39,77,37,"error"],[72,44,77,42],[72,45,77,43],[73,6,78,4],[74,4,79,2],[74,5,79,3],[75,4,81,2],[75,24,82,4],[75,28,82,4,"_reactJsxDevRuntime"],[75,47,82,4],[75,48,82,4,"jsxDEV"],[75,54,82,4],[75,56,82,5,"AuthContext"],[75,67,82,16],[75,68,82,17,"Provider"],[75,76,82,25],[76,6,82,26,"value"],[76,11,82,31],[76,13,82,33],[77,8,82,35,"user"],[77,12,82,39],[78,8,82,41,"token"],[78,13,82,46],[79,8,82,48,"login"],[79,13,82,53],[80,8,82,55,"logout"],[80,14,82,61],[81,8,82,63,"loading"],[82,6,82,71],[82,7,82,73],[83,6,82,73,"children"],[83,14,82,73],[83,16,83,7,"children"],[84,4,83,15],[85,6,83,15,"fileName"],[85,14,83,15],[85,16,83,15,"_jsxFileName"],[85,28,83,15],[86,6,83,15,"lineNumber"],[86,16,83,15],[87,6,83,15,"columnNumber"],[87,18,83,15],[88,4,83,15],[88,11,84,26],[88,12,84,27],[89,2,86,0],[90,2,88,7],[90,11,88,16,"useAuth"],[90,18,88,23,"useAuth"],[90,19,88,23],[90,21,88,26],[91,4,89,2],[91,10,89,8,"context"],[91,17,89,15],[91,20,89,18],[91,24,89,18,"useContext"],[91,30,89,28],[91,31,89,28,"useContext"],[91,41,89,28],[91,43,89,29,"AuthContext"],[91,54,89,40],[91,55,89,41],[92,4,90,2],[92,8,90,6,"context"],[92,15,90,13],[92,20,90,18,"undefined"],[92,29,90,27],[92,31,90,29],[93,6,91,4],[93,12,91,10],[93,16,91,14,"Error"],[93,21,91,19],[93,22,91,20],[93,67,91,65],[93,68,91,66],[94,4,92,2],[95,4,93,2],[95,11,93,9,"context"],[95,18,93,16],[96,2,94,0],[97,0,94,1],[97,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;OCwB;YCK;GDE;yBEE;GFc;gBGE;GHkB;iBIE;GJS;CDO;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}