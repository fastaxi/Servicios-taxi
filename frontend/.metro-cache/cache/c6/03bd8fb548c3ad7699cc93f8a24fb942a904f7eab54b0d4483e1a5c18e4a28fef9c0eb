{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../config/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":176},"end":{"line":4,"column":40,"index":216}}],"key":"V94urzZZSfzzXHrNxWFShT8IuQo=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":217},"end":{"line":5,"column":40,"index":257}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/OrganizationContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.OrganizationProvider = OrganizationProvider;\n  exports.useOrganization = useOrganization;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _configApi = require(_dependencyMap[3], \"../config/api\");\n  var _AuthContext = require(_dependencyMap[4], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  const defaultOrganization = {\n    id: null,\n    nombre: 'TaxiFast',\n    slug: 'taxifast',\n    logo_base64: null,\n    color_primario: '#0066CC',\n    color_secundario: '#FFD700',\n    telefono: '',\n    email: '',\n    web: 'www.taxifast.com',\n    direccion: '',\n    localidad: '',\n    provincia: ''\n  };\n  const OrganizationContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function OrganizationProvider({\n    children\n  }) {\n    _s();\n    const [organization, setOrganization] = (0, _react.useState)(defaultOrganization);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const {\n      user,\n      token\n    } = (0, _AuthContext.useAuth)();\n    (0, _react.useEffect)(() => {\n      if (user && token) {\n        loadOrganization();\n      } else {\n        setOrganization(defaultOrganization);\n        setLoading(false);\n      }\n    }, [user, token]);\n    const loadOrganization = async () => {\n      try {\n        setLoading(true);\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (!storedToken) {\n          setOrganization(defaultOrganization);\n          return;\n        }\n        const response = await axios.default.get(`${_configApi.API_URL}/my-organization`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        setOrganization(response.data);\n\n        // Cache the organization data\n        await AsyncStorage.default.setItem('organization', JSON.stringify(response.data));\n      } catch (error) {\n        console.error('[OrganizationContext] Error loading organization:', error);\n\n        // Try to load from cache\n        try {\n          const cached = await AsyncStorage.default.getItem('organization');\n          if (cached) {\n            setOrganization(JSON.parse(cached));\n          } else {\n            setOrganization(defaultOrganization);\n          }\n        } catch (e) {\n          setOrganization(defaultOrganization);\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    const refreshOrganization = async () => {\n      await loadOrganization();\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(OrganizationContext.Provider, {\n      value: {\n        organization,\n        loading,\n        refreshOrganization\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this);\n  }\n  _s(OrganizationProvider, \"9Qa9lfA+1RMsmTAmRRXdQsSm9Ow=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = OrganizationProvider;\n  function useOrganization() {\n    _s2();\n    const context = (0, _react.useContext)(OrganizationContext);\n    if (context === undefined) {\n      throw new Error('useOrganization must be used within an OrganizationProvider');\n    }\n    return context;\n  }\n  _s2(useOrganization, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"OrganizationProvider\");\n});","lineCount":124,"map":[[15,2,45,0,"exports"],[15,9,45,0],[15,10,45,0,"OrganizationProvider"],[15,30,45,0],[15,33,45,0,"OrganizationProvider"],[15,53,45,0],[16,2,107,0,"exports"],[16,9,107,0],[16,10,107,0,"useOrganization"],[16,25,107,0],[16,28,107,0,"useOrganization"],[16,43,107,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_axios"],[20,12,3,0],[20,15,3,0,"require"],[20,22,3,0],[20,23,3,0,"_dependencyMap"],[20,37,3,0],[21,2,3,0],[21,6,3,0,"axios"],[21,11,3,0],[21,14,3,0,"_interopDefault"],[21,29,3,0],[21,30,3,0,"_axios"],[21,36,3,0],[22,2,4,0],[22,6,4,0,"_configApi"],[22,16,4,0],[22,19,4,0,"require"],[22,26,4,0],[22,27,4,0,"_dependencyMap"],[22,41,4,0],[23,2,5,0],[23,6,5,0,"_AuthContext"],[23,18,5,0],[23,21,5,0,"require"],[23,28,5,0],[23,29,5,0,"_dependencyMap"],[23,43,5,0],[24,2,5,40],[24,6,5,40,"_reactJsxDevRuntime"],[24,25,5,40],[24,28,5,40,"require"],[24,35,5,40],[24,36,5,40,"_dependencyMap"],[24,50,5,40],[25,2,28,0],[25,8,28,6,"defaultOrganization"],[25,27,28,47],[25,30,28,50],[26,4,29,2,"id"],[26,6,29,4],[26,8,29,6],[26,12,29,10],[27,4,30,2,"nombre"],[27,10,30,8],[27,12,30,10],[27,22,30,20],[28,4,31,2,"slug"],[28,8,31,6],[28,10,31,8],[28,20,31,18],[29,4,32,2,"logo_base64"],[29,15,32,13],[29,17,32,15],[29,21,32,19],[30,4,33,2,"color_primario"],[30,18,33,16],[30,20,33,18],[30,29,33,27],[31,4,34,2,"color_secundario"],[31,20,34,18],[31,22,34,20],[31,31,34,29],[32,4,35,2,"telefono"],[32,12,35,10],[32,14,35,12],[32,16,35,14],[33,4,36,2,"email"],[33,9,36,7],[33,11,36,9],[33,13,36,11],[34,4,37,2,"web"],[34,7,37,5],[34,9,37,7],[34,27,37,25],[35,4,38,2,"direccion"],[35,13,38,11],[35,15,38,13],[35,17,38,15],[36,4,39,2,"localidad"],[36,13,39,11],[36,15,39,13],[36,17,39,15],[37,4,40,2,"provincia"],[37,13,40,11],[37,15,40,13],[38,2,41,0],[38,3,41,1],[39,2,43,0],[39,8,43,6,"OrganizationContext"],[39,27,43,25],[39,43,43,28],[39,47,43,28,"createContext"],[39,53,43,41],[39,54,43,41,"createContext"],[39,67,43,41],[39,69,43,79,"undefined"],[39,78,43,88],[39,79,43,89],[40,2,45,7],[40,11,45,16,"OrganizationProvider"],[40,31,45,36,"OrganizationProvider"],[40,32,45,37],[41,4,45,39,"children"],[42,2,45,79],[42,3,45,80],[42,5,45,82],[43,4,45,82,"_s"],[43,6,45,82],[44,4,46,2],[44,10,46,8],[44,11,46,9,"organization"],[44,23,46,21],[44,25,46,23,"setOrganization"],[44,40,46,38],[44,41,46,39],[44,44,46,42],[44,48,46,42,"useState"],[44,54,46,50],[44,55,46,50,"useState"],[44,63,46,50],[44,65,46,73,"defaultOrganization"],[44,84,46,92],[44,85,46,93],[45,4,47,2],[45,10,47,8],[45,11,47,9,"loading"],[45,18,47,16],[45,20,47,18,"setLoading"],[45,30,47,28],[45,31,47,29],[45,34,47,32],[45,38,47,32,"useState"],[45,44,47,40],[45,45,47,40,"useState"],[45,53,47,40],[45,55,47,41],[45,59,47,45],[45,60,47,46],[46,4,48,2],[46,10,48,8],[47,6,48,10,"user"],[47,10,48,14],[48,6,48,16,"token"],[49,4,48,22],[49,5,48,23],[49,8,48,26],[49,12,48,26,"useAuth"],[49,24,48,33],[49,25,48,33,"useAuth"],[49,32,48,33],[49,34,48,34],[49,35,48,35],[50,4,50,2],[50,8,50,2,"useEffect"],[50,14,50,11],[50,15,50,11,"useEffect"],[50,24,50,11],[50,26,50,12],[50,32,50,18],[51,6,51,4],[51,10,51,8,"user"],[51,14,51,12],[51,18,51,16,"token"],[51,23,51,21],[51,25,51,23],[52,8,52,6,"loadOrganization"],[52,24,52,22],[52,25,52,23],[52,26,52,24],[53,6,53,4],[53,7,53,5],[53,13,53,11],[54,8,54,6,"setOrganization"],[54,23,54,21],[54,24,54,22,"defaultOrganization"],[54,43,54,41],[54,44,54,42],[55,8,55,6,"setLoading"],[55,18,55,16],[55,19,55,17],[55,24,55,22],[55,25,55,23],[56,6,56,4],[57,4,57,2],[57,5,57,3],[57,7,57,5],[57,8,57,6,"user"],[57,12,57,10],[57,14,57,12,"token"],[57,19,57,17],[57,20,57,18],[57,21,57,19],[58,4,59,2],[58,10,59,8,"loadOrganization"],[58,26,59,24],[58,29,59,27],[58,35,59,27,"loadOrganization"],[58,36,59,27],[58,41,59,39],[59,6,60,4],[59,10,60,8],[60,8,61,6,"setLoading"],[60,18,61,16],[60,19,61,17],[60,23,61,21],[60,24,61,22],[61,8,62,6],[61,14,62,12,"storedToken"],[61,25,62,23],[61,28,62,26],[61,34,62,32,"AsyncStorage"],[61,46,62,44],[61,47,62,44,"default"],[61,54,62,44],[61,55,62,45,"getItem"],[61,62,62,52],[61,63,62,53],[61,70,62,60],[61,71,62,61],[62,8,64,6],[62,12,64,10],[62,13,64,11,"storedToken"],[62,24,64,22],[62,26,64,24],[63,10,65,8,"setOrganization"],[63,25,65,23],[63,26,65,24,"defaultOrganization"],[63,45,65,43],[63,46,65,44],[64,10,66,8],[65,8,67,6],[66,8,69,6],[66,14,69,12,"response"],[66,22,69,20],[66,25,69,23],[66,31,69,29,"axios"],[66,36,69,34],[66,37,69,34,"default"],[66,44,69,34],[66,45,69,35,"get"],[66,48,69,38],[66,49,69,39],[66,52,69,42,"API_URL"],[66,62,69,49],[66,63,69,49,"API_URL"],[66,70,69,49],[66,88,69,67],[66,90,69,69],[67,10,70,8,"headers"],[67,17,70,15],[67,19,70,17],[68,12,70,19,"Authorization"],[68,25,70,32],[68,27,70,34],[68,37,70,44,"storedToken"],[68,48,70,55],[69,10,70,58],[70,8,71,6],[70,9,71,7],[70,10,71,8],[71,8,73,6,"setOrganization"],[71,23,73,21],[71,24,73,22,"response"],[71,32,73,30],[71,33,73,31,"data"],[71,37,73,35],[71,38,73,36],[73,8,75,6],[74,8,76,6],[74,14,76,12,"AsyncStorage"],[74,26,76,24],[74,27,76,24,"default"],[74,34,76,24],[74,35,76,25,"setItem"],[74,42,76,32],[74,43,76,33],[74,57,76,47],[74,59,76,49,"JSON"],[74,63,76,53],[74,64,76,54,"stringify"],[74,73,76,63],[74,74,76,64,"response"],[74,82,76,72],[74,83,76,73,"data"],[74,87,76,77],[74,88,76,78],[74,89,76,79],[75,6,77,4],[75,7,77,5],[75,8,77,6],[75,15,77,13,"error"],[75,20,77,18],[75,22,77,20],[76,8,78,6,"console"],[76,15,78,13],[76,16,78,14,"error"],[76,21,78,19],[76,22,78,20],[76,73,78,71],[76,75,78,73,"error"],[76,80,78,78],[76,81,78,79],[78,8,80,6],[79,8,81,6],[79,12,81,10],[80,10,82,8],[80,16,82,14,"cached"],[80,22,82,20],[80,25,82,23],[80,31,82,29,"AsyncStorage"],[80,43,82,41],[80,44,82,41,"default"],[80,51,82,41],[80,52,82,42,"getItem"],[80,59,82,49],[80,60,82,50],[80,74,82,64],[80,75,82,65],[81,10,83,8],[81,14,83,12,"cached"],[81,20,83,18],[81,22,83,20],[82,12,84,10,"setOrganization"],[82,27,84,25],[82,28,84,26,"JSON"],[82,32,84,30],[82,33,84,31,"parse"],[82,38,84,36],[82,39,84,37,"cached"],[82,45,84,43],[82,46,84,44],[82,47,84,45],[83,10,85,8],[83,11,85,9],[83,17,85,15],[84,12,86,10,"setOrganization"],[84,27,86,25],[84,28,86,26,"defaultOrganization"],[84,47,86,45],[84,48,86,46],[85,10,87,8],[86,8,88,6],[86,9,88,7],[86,10,88,8],[86,17,88,15,"e"],[86,18,88,16],[86,20,88,18],[87,10,89,8,"setOrganization"],[87,25,89,23],[87,26,89,24,"defaultOrganization"],[87,45,89,43],[87,46,89,44],[88,8,90,6],[89,6,91,4],[89,7,91,5],[89,16,91,14],[90,8,92,6,"setLoading"],[90,18,92,16],[90,19,92,17],[90,24,92,22],[90,25,92,23],[91,6,93,4],[92,4,94,2],[92,5,94,3],[93,4,96,2],[93,10,96,8,"refreshOrganization"],[93,29,96,27],[93,32,96,30],[93,38,96,30,"refreshOrganization"],[93,39,96,30],[93,44,96,42],[94,6,97,4],[94,12,97,10,"loadOrganization"],[94,28,97,26],[94,29,97,27],[94,30,97,28],[95,4,98,2],[95,5,98,3],[96,4,100,2],[96,24,101,4],[96,28,101,4,"_reactJsxDevRuntime"],[96,47,101,4],[96,48,101,4,"jsxDEV"],[96,54,101,4],[96,56,101,5,"OrganizationContext"],[96,75,101,24],[96,76,101,25,"Provider"],[96,84,101,33],[97,6,101,34,"value"],[97,11,101,39],[97,13,101,41],[98,8,101,43,"organization"],[98,20,101,55],[99,8,101,57,"loading"],[99,15,101,64],[100,8,101,66,"refreshOrganization"],[101,6,101,86],[101,7,101,88],[102,6,101,88,"children"],[102,14,101,88],[102,16,102,7,"children"],[103,4,102,15],[104,6,102,15,"fileName"],[104,14,102,15],[104,16,102,15,"_jsxFileName"],[104,28,102,15],[105,6,102,15,"lineNumber"],[105,16,102,15],[106,6,102,15,"columnNumber"],[106,18,102,15],[107,4,102,15],[107,11,103,34],[107,12,103,35],[108,2,105,0],[109,2,105,1,"_s"],[109,4,105,1],[109,5,45,16,"OrganizationProvider"],[109,25,45,36],[110,4,45,36],[110,12,48,26,"useAuth"],[110,24,48,33],[110,25,48,33,"useAuth"],[110,32,48,33],[111,2,48,33],[112,2,48,33,"_c"],[112,4,48,33],[112,7,45,16,"OrganizationProvider"],[112,27,45,36],[113,2,107,7],[113,11,107,16,"useOrganization"],[113,26,107,31,"useOrganization"],[113,27,107,31],[113,29,107,34],[114,4,107,34,"_s2"],[114,7,107,34],[115,4,108,2],[115,10,108,8,"context"],[115,17,108,15],[115,20,108,18],[115,24,108,18,"useContext"],[115,30,108,28],[115,31,108,28,"useContext"],[115,41,108,28],[115,43,108,29,"OrganizationContext"],[115,62,108,48],[115,63,108,49],[116,4,109,2],[116,8,109,6,"context"],[116,15,109,13],[116,20,109,18,"undefined"],[116,29,109,27],[116,31,109,29],[117,6,110,4],[117,12,110,10],[117,16,110,14,"Error"],[117,21,110,19],[117,22,110,20],[117,83,110,81],[117,84,110,82],[118,4,111,2],[119,4,112,2],[119,11,112,9,"context"],[119,18,112,16],[120,2,113,0],[121,2,113,1,"_s2"],[121,5,113,1],[121,6,107,16,"useOrganization"],[121,21,107,31],[122,2,107,31],[122,6,107,31,"_c"],[122,8,107,31],[123,2,107,31,"$RefreshReg$"],[123,14,107,31],[123,15,107,31,"_c"],[123,17,107,31],[124,0,107,31],[124,3]],"functionMap":{"names":["<global>","OrganizationProvider","useEffect$argument_0","loadOrganization","refreshOrganization","useOrganization"],"mappings":"AAA;OC4C;YCK;GDO;2BEE;GFmC;8BGE;GHE;CDO;OKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}