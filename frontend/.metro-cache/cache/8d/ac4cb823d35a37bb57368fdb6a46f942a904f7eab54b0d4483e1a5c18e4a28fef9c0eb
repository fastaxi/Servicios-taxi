{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../config/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":176},"end":{"line":4,"column":40,"index":216}}],"key":"V94urzZZSfzzXHrNxWFShT8IuQo=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":217},"end":{"line":5,"column":40,"index":257}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/OrganizationContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.OrganizationProvider = OrganizationProvider;\n  exports.useOrganization = useOrganization;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _configApi = require(_dependencyMap[3], \"../config/api\");\n  var _AuthContext = require(_dependencyMap[4], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[5], \"react/jsx-dev-runtime\");\n  const defaultOrganization = {\n    id: null,\n    nombre: 'TaxiFast',\n    slug: 'taxifast',\n    logo_base64: null,\n    color_primario: '#0066CC',\n    color_secundario: '#FFD700',\n    telefono: '',\n    email: '',\n    web: 'www.taxifast.com',\n    direccion: '',\n    localidad: '',\n    provincia: ''\n  };\n  const OrganizationContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function OrganizationProvider({\n    children\n  }) {\n    const [organization, setOrganization] = (0, _react.useState)(defaultOrganization);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const {\n      user,\n      token\n    } = (0, _AuthContext.useAuth)();\n    (0, _react.useEffect)(() => {\n      if (user && token) {\n        loadOrganization();\n      } else {\n        setOrganization(defaultOrganization);\n        setLoading(false);\n      }\n    }, [user, token]);\n    const loadOrganization = async () => {\n      try {\n        setLoading(true);\n        const storedToken = await AsyncStorage.default.getItem('token');\n        if (!storedToken) {\n          setOrganization(defaultOrganization);\n          return;\n        }\n        const response = await axios.default.get(`${_configApi.API_URL}/my-organization`, {\n          headers: {\n            Authorization: `Bearer ${storedToken}`\n          }\n        });\n        setOrganization(response.data);\n\n        // Cache the organization data\n        await AsyncStorage.default.setItem('organization', JSON.stringify(response.data));\n      } catch (error) {\n        console.error('[OrganizationContext] Error loading organization:', error);\n\n        // Try to load from cache\n        try {\n          const cached = await AsyncStorage.default.getItem('organization');\n          if (cached) {\n            setOrganization(JSON.parse(cached));\n          } else {\n            setOrganization(defaultOrganization);\n          }\n        } catch (e) {\n          setOrganization(defaultOrganization);\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    const refreshOrganization = async () => {\n      await loadOrganization();\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(OrganizationContext.Provider, {\n      value: {\n        organization,\n        loading,\n        refreshOrganization\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }, this);\n  }\n  function useOrganization() {\n    const context = (0, _react.useContext)(OrganizationContext);\n    if (context === undefined) {\n      throw new Error('useOrganization must be used within an OrganizationProvider');\n    }\n    return context;\n  }\n});","lineCount":113,"map":[[13,2,45,0,"exports"],[13,9,45,0],[13,10,45,0,"OrganizationProvider"],[13,30,45,0],[13,33,45,0,"OrganizationProvider"],[13,53,45,0],[14,2,107,0,"exports"],[14,9,107,0],[14,10,107,0,"useOrganization"],[14,25,107,0],[14,28,107,0,"useOrganization"],[14,43,107,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,4,0],[20,6,4,0,"_configApi"],[20,16,4,0],[20,19,4,0,"require"],[20,26,4,0],[20,27,4,0,"_dependencyMap"],[20,41,4,0],[21,2,5,0],[21,6,5,0,"_AuthContext"],[21,18,5,0],[21,21,5,0,"require"],[21,28,5,0],[21,29,5,0,"_dependencyMap"],[21,43,5,0],[22,2,5,40],[22,6,5,40,"_reactJsxDevRuntime"],[22,25,5,40],[22,28,5,40,"require"],[22,35,5,40],[22,36,5,40,"_dependencyMap"],[22,50,5,40],[23,2,28,0],[23,8,28,6,"defaultOrganization"],[23,27,28,47],[23,30,28,50],[24,4,29,2,"id"],[24,6,29,4],[24,8,29,6],[24,12,29,10],[25,4,30,2,"nombre"],[25,10,30,8],[25,12,30,10],[25,22,30,20],[26,4,31,2,"slug"],[26,8,31,6],[26,10,31,8],[26,20,31,18],[27,4,32,2,"logo_base64"],[27,15,32,13],[27,17,32,15],[27,21,32,19],[28,4,33,2,"color_primario"],[28,18,33,16],[28,20,33,18],[28,29,33,27],[29,4,34,2,"color_secundario"],[29,20,34,18],[29,22,34,20],[29,31,34,29],[30,4,35,2,"telefono"],[30,12,35,10],[30,14,35,12],[30,16,35,14],[31,4,36,2,"email"],[31,9,36,7],[31,11,36,9],[31,13,36,11],[32,4,37,2,"web"],[32,7,37,5],[32,9,37,7],[32,27,37,25],[33,4,38,2,"direccion"],[33,13,38,11],[33,15,38,13],[33,17,38,15],[34,4,39,2,"localidad"],[34,13,39,11],[34,15,39,13],[34,17,39,15],[35,4,40,2,"provincia"],[35,13,40,11],[35,15,40,13],[36,2,41,0],[36,3,41,1],[37,2,43,0],[37,8,43,6,"OrganizationContext"],[37,27,43,25],[37,43,43,28],[37,47,43,28,"createContext"],[37,53,43,41],[37,54,43,41,"createContext"],[37,67,43,41],[37,69,43,79,"undefined"],[37,78,43,88],[37,79,43,89],[38,2,45,7],[38,11,45,16,"OrganizationProvider"],[38,31,45,36,"OrganizationProvider"],[38,32,45,37],[39,4,45,39,"children"],[40,2,45,79],[40,3,45,80],[40,5,45,82],[41,4,46,2],[41,10,46,8],[41,11,46,9,"organization"],[41,23,46,21],[41,25,46,23,"setOrganization"],[41,40,46,38],[41,41,46,39],[41,44,46,42],[41,48,46,42,"useState"],[41,54,46,50],[41,55,46,50,"useState"],[41,63,46,50],[41,65,46,73,"defaultOrganization"],[41,84,46,92],[41,85,46,93],[42,4,47,2],[42,10,47,8],[42,11,47,9,"loading"],[42,18,47,16],[42,20,47,18,"setLoading"],[42,30,47,28],[42,31,47,29],[42,34,47,32],[42,38,47,32,"useState"],[42,44,47,40],[42,45,47,40,"useState"],[42,53,47,40],[42,55,47,41],[42,59,47,45],[42,60,47,46],[43,4,48,2],[43,10,48,8],[44,6,48,10,"user"],[44,10,48,14],[45,6,48,16,"token"],[46,4,48,22],[46,5,48,23],[46,8,48,26],[46,12,48,26,"useAuth"],[46,24,48,33],[46,25,48,33,"useAuth"],[46,32,48,33],[46,34,48,34],[46,35,48,35],[47,4,50,2],[47,8,50,2,"useEffect"],[47,14,50,11],[47,15,50,11,"useEffect"],[47,24,50,11],[47,26,50,12],[47,32,50,18],[48,6,51,4],[48,10,51,8,"user"],[48,14,51,12],[48,18,51,16,"token"],[48,23,51,21],[48,25,51,23],[49,8,52,6,"loadOrganization"],[49,24,52,22],[49,25,52,23],[49,26,52,24],[50,6,53,4],[50,7,53,5],[50,13,53,11],[51,8,54,6,"setOrganization"],[51,23,54,21],[51,24,54,22,"defaultOrganization"],[51,43,54,41],[51,44,54,42],[52,8,55,6,"setLoading"],[52,18,55,16],[52,19,55,17],[52,24,55,22],[52,25,55,23],[53,6,56,4],[54,4,57,2],[54,5,57,3],[54,7,57,5],[54,8,57,6,"user"],[54,12,57,10],[54,14,57,12,"token"],[54,19,57,17],[54,20,57,18],[54,21,57,19],[55,4,59,2],[55,10,59,8,"loadOrganization"],[55,26,59,24],[55,29,59,27],[55,35,59,27,"loadOrganization"],[55,36,59,27],[55,41,59,39],[56,6,60,4],[56,10,60,8],[57,8,61,6,"setLoading"],[57,18,61,16],[57,19,61,17],[57,23,61,21],[57,24,61,22],[58,8,62,6],[58,14,62,12,"storedToken"],[58,25,62,23],[58,28,62,26],[58,34,62,32,"AsyncStorage"],[58,46,62,44],[58,47,62,44,"default"],[58,54,62,44],[58,55,62,45,"getItem"],[58,62,62,52],[58,63,62,53],[58,70,62,60],[58,71,62,61],[59,8,64,6],[59,12,64,10],[59,13,64,11,"storedToken"],[59,24,64,22],[59,26,64,24],[60,10,65,8,"setOrganization"],[60,25,65,23],[60,26,65,24,"defaultOrganization"],[60,45,65,43],[60,46,65,44],[61,10,66,8],[62,8,67,6],[63,8,69,6],[63,14,69,12,"response"],[63,22,69,20],[63,25,69,23],[63,31,69,29,"axios"],[63,36,69,34],[63,37,69,34,"default"],[63,44,69,34],[63,45,69,35,"get"],[63,48,69,38],[63,49,69,39],[63,52,69,42,"API_URL"],[63,62,69,49],[63,63,69,49,"API_URL"],[63,70,69,49],[63,88,69,67],[63,90,69,69],[64,10,70,8,"headers"],[64,17,70,15],[64,19,70,17],[65,12,70,19,"Authorization"],[65,25,70,32],[65,27,70,34],[65,37,70,44,"storedToken"],[65,48,70,55],[66,10,70,58],[67,8,71,6],[67,9,71,7],[67,10,71,8],[68,8,73,6,"setOrganization"],[68,23,73,21],[68,24,73,22,"response"],[68,32,73,30],[68,33,73,31,"data"],[68,37,73,35],[68,38,73,36],[70,8,75,6],[71,8,76,6],[71,14,76,12,"AsyncStorage"],[71,26,76,24],[71,27,76,24,"default"],[71,34,76,24],[71,35,76,25,"setItem"],[71,42,76,32],[71,43,76,33],[71,57,76,47],[71,59,76,49,"JSON"],[71,63,76,53],[71,64,76,54,"stringify"],[71,73,76,63],[71,74,76,64,"response"],[71,82,76,72],[71,83,76,73,"data"],[71,87,76,77],[71,88,76,78],[71,89,76,79],[72,6,77,4],[72,7,77,5],[72,8,77,6],[72,15,77,13,"error"],[72,20,77,18],[72,22,77,20],[73,8,78,6,"console"],[73,15,78,13],[73,16,78,14,"error"],[73,21,78,19],[73,22,78,20],[73,73,78,71],[73,75,78,73,"error"],[73,80,78,78],[73,81,78,79],[75,8,80,6],[76,8,81,6],[76,12,81,10],[77,10,82,8],[77,16,82,14,"cached"],[77,22,82,20],[77,25,82,23],[77,31,82,29,"AsyncStorage"],[77,43,82,41],[77,44,82,41,"default"],[77,51,82,41],[77,52,82,42,"getItem"],[77,59,82,49],[77,60,82,50],[77,74,82,64],[77,75,82,65],[78,10,83,8],[78,14,83,12,"cached"],[78,20,83,18],[78,22,83,20],[79,12,84,10,"setOrganization"],[79,27,84,25],[79,28,84,26,"JSON"],[79,32,84,30],[79,33,84,31,"parse"],[79,38,84,36],[79,39,84,37,"cached"],[79,45,84,43],[79,46,84,44],[79,47,84,45],[80,10,85,8],[80,11,85,9],[80,17,85,15],[81,12,86,10,"setOrganization"],[81,27,86,25],[81,28,86,26,"defaultOrganization"],[81,47,86,45],[81,48,86,46],[82,10,87,8],[83,8,88,6],[83,9,88,7],[83,10,88,8],[83,17,88,15,"e"],[83,18,88,16],[83,20,88,18],[84,10,89,8,"setOrganization"],[84,25,89,23],[84,26,89,24,"defaultOrganization"],[84,45,89,43],[84,46,89,44],[85,8,90,6],[86,6,91,4],[86,7,91,5],[86,16,91,14],[87,8,92,6,"setLoading"],[87,18,92,16],[87,19,92,17],[87,24,92,22],[87,25,92,23],[88,6,93,4],[89,4,94,2],[89,5,94,3],[90,4,96,2],[90,10,96,8,"refreshOrganization"],[90,29,96,27],[90,32,96,30],[90,38,96,30,"refreshOrganization"],[90,39,96,30],[90,44,96,42],[91,6,97,4],[91,12,97,10,"loadOrganization"],[91,28,97,26],[91,29,97,27],[91,30,97,28],[92,4,98,2],[92,5,98,3],[93,4,100,2],[93,24,101,4],[93,28,101,4,"_reactJsxDevRuntime"],[93,47,101,4],[93,48,101,4,"jsxDEV"],[93,54,101,4],[93,56,101,5,"OrganizationContext"],[93,75,101,24],[93,76,101,25,"Provider"],[93,84,101,33],[94,6,101,34,"value"],[94,11,101,39],[94,13,101,41],[95,8,101,43,"organization"],[95,20,101,55],[96,8,101,57,"loading"],[96,15,101,64],[97,8,101,66,"refreshOrganization"],[98,6,101,86],[98,7,101,88],[99,6,101,88,"children"],[99,14,101,88],[99,16,102,7,"children"],[100,4,102,15],[101,6,102,15,"fileName"],[101,14,102,15],[101,16,102,15,"_jsxFileName"],[101,28,102,15],[102,6,102,15,"lineNumber"],[102,16,102,15],[103,6,102,15,"columnNumber"],[103,18,102,15],[104,4,102,15],[104,11,103,34],[104,12,103,35],[105,2,105,0],[106,2,107,7],[106,11,107,16,"useOrganization"],[106,26,107,31,"useOrganization"],[106,27,107,31],[106,29,107,34],[107,4,108,2],[107,10,108,8,"context"],[107,17,108,15],[107,20,108,18],[107,24,108,18,"useContext"],[107,30,108,28],[107,31,108,28,"useContext"],[107,41,108,28],[107,43,108,29,"OrganizationContext"],[107,62,108,48],[107,63,108,49],[108,4,109,2],[108,8,109,6,"context"],[108,15,109,13],[108,20,109,18,"undefined"],[108,29,109,27],[108,31,109,29],[109,6,110,4],[109,12,110,10],[109,16,110,14,"Error"],[109,21,110,19],[109,22,110,20],[109,83,110,81],[109,84,110,82],[110,4,111,2],[111,4,112,2],[111,11,112,9,"context"],[111,18,112,16],[112,2,113,0],[113,0,113,1],[113,3]],"functionMap":{"names":["<global>","OrganizationProvider","useEffect$argument_0","loadOrganization","refreshOrganization","useOrganization"],"mappings":"AAA;OC4C;YCK;GDO;2BEE;GFmC;8BGE;GHE;CDO;OKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}