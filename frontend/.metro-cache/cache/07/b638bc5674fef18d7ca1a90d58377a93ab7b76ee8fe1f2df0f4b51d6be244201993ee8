{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = (process.env.EXPO_PUBLIC_BACKEND_URL || 'https://taxistas-asturias.preview.emergentagent.com') + '/api';\n  console.log('[AuthContext] API_URL:', API_URL);\n  console.log('[AuthContext] EXPO_PUBLIC_BACKEND_URL:', process.env.EXPO_PUBLIC_BACKEND_URL);\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        console.log('[AuthContext] Attempting login to:', `${API_URL}/auth/login`);\n        const response = await axios.default.post(`${API_URL}/auth/login`, {\n          username,\n          password\n        });\n        console.log('[AuthContext] Login successful');\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        console.error('[AuthContext] Login error:', error);\n        console.error('[AuthContext] Error response:', error.response?.data);\n        console.error('[AuthContext] Error message:', error.message);\n        throw new Error(error.response?.data?.detail || error.message || 'Error al iniciar sesiÃ³n');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":103,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"AuthProvider"],[13,22,27,0],[13,25,27,0,"AuthProvider"],[13,37,27,0],[14,2,94,0,"exports"],[14,9,94,0],[14,10,94,0,"useAuth"],[14,17,94,0],[14,20,94,0,"useAuth"],[14,27,94,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_axios"],[18,12,3,0],[18,15,3,0,"require"],[18,22,3,0],[18,23,3,0,"_dependencyMap"],[18,37,3,0],[19,2,3,0],[19,6,3,0,"axios"],[19,11,3,0],[19,14,3,0,"_interopDefault"],[19,29,3,0],[19,30,3,0,"_axios"],[19,36,3,0],[20,2,3,26],[20,6,3,26,"_reactJsxDevRuntime"],[20,25,3,26],[20,28,3,26,"require"],[20,35,3,26],[20,36,3,26,"_dependencyMap"],[20,50,3,26],[21,2,6,0],[21,8,6,6,"API_URL"],[21,15,6,13],[21,18,6,16],[21,19,6,17,"process"],[21,26,6,24],[21,27,6,25,"env"],[21,30,6,28],[21,31,6,29,"EXPO_PUBLIC_BACKEND_URL"],[21,54,6,52],[21,58,6,56],[21,111,6,109],[21,115,6,113],[21,121,6,119],[22,2,7,0,"console"],[22,9,7,7],[22,10,7,8,"log"],[22,13,7,11],[22,14,7,12],[22,38,7,36],[22,40,7,38,"API_URL"],[22,47,7,45],[22,48,7,46],[23,2,8,0,"console"],[23,9,8,7],[23,10,8,8,"log"],[23,13,8,11],[23,14,8,12],[23,54,8,52],[23,56,8,54,"process"],[23,63,8,61],[23,64,8,62,"env"],[23,67,8,65],[23,68,8,66,"EXPO_PUBLIC_BACKEND_URL"],[23,91,8,89],[23,92,8,90],[24,2,25,0],[24,8,25,6,"AuthContext"],[24,19,25,17],[24,35,25,20],[24,39,25,20,"createContext"],[24,45,25,33],[24,46,25,33,"createContext"],[24,59,25,33],[24,61,25,63,"undefined"],[24,70,25,72],[24,71,25,73],[25,2,27,7],[25,11,27,16,"AuthProvider"],[25,23,27,28,"AuthProvider"],[25,24,27,29],[26,4,27,31,"children"],[27,2,27,71],[27,3,27,72],[27,5,27,74],[28,4,28,2],[28,10,28,8],[28,11,28,9,"user"],[28,15,28,13],[28,17,28,15,"setUser"],[28,24,28,22],[28,25,28,23],[28,28,28,26],[28,32,28,26,"useState"],[28,38,28,34],[28,39,28,34,"useState"],[28,47,28,34],[28,49,28,48],[28,53,28,52],[28,54,28,53],[29,4,29,2],[29,10,29,8],[29,11,29,9,"token"],[29,16,29,14],[29,18,29,16,"setToken"],[29,26,29,24],[29,27,29,25],[29,30,29,28],[29,34,29,28,"useState"],[29,40,29,36],[29,41,29,36,"useState"],[29,49,29,36],[29,51,29,52],[29,55,29,56],[29,56,29,57],[30,4,30,2],[30,10,30,8],[30,11,30,9,"loading"],[30,18,30,16],[30,20,30,18,"setLoading"],[30,30,30,28],[30,31,30,29],[30,34,30,32],[30,38,30,32,"useState"],[30,44,30,40],[30,45,30,40,"useState"],[30,53,30,40],[30,55,30,41],[30,59,30,45],[30,60,30,46],[31,4,32,2],[31,8,32,2,"useEffect"],[31,14,32,11],[31,15,32,11,"useEffect"],[31,24,32,11],[31,26,32,12],[31,32,32,18],[32,6,33,4,"loadStoredAuth"],[32,20,33,18],[32,21,33,19],[32,22,33,20],[33,4,34,2],[33,5,34,3],[33,7,34,5],[33,9,34,7],[33,10,34,8],[34,4,36,2],[34,10,36,8,"loadStoredAuth"],[34,24,36,22],[34,27,36,25],[34,33,36,25,"loadStoredAuth"],[34,34,36,25],[34,39,36,37],[35,6,37,4],[35,10,37,8],[36,8,38,6],[36,14,38,12,"storedToken"],[36,25,38,23],[36,28,38,26],[36,34,38,32,"AsyncStorage"],[36,46,38,44],[36,47,38,44,"default"],[36,54,38,44],[36,55,38,45,"getItem"],[36,62,38,52],[36,63,38,53],[36,70,38,60],[36,71,38,61],[37,8,39,6],[37,14,39,12,"storedUser"],[37,24,39,22],[37,27,39,25],[37,33,39,31,"AsyncStorage"],[37,45,39,43],[37,46,39,43,"default"],[37,53,39,43],[37,54,39,44,"getItem"],[37,61,39,51],[37,62,39,52],[37,68,39,58],[37,69,39,59],[38,8,41,6],[38,12,41,10,"storedToken"],[38,23,41,21],[38,27,41,25,"storedUser"],[38,37,41,35],[38,39,41,37],[39,10,42,8,"setToken"],[39,18,42,16],[39,19,42,17,"storedToken"],[39,30,42,28],[39,31,42,29],[40,10,43,8,"setUser"],[40,17,43,15],[40,18,43,16,"JSON"],[40,22,43,20],[40,23,43,21,"parse"],[40,28,43,26],[40,29,43,27,"storedUser"],[40,39,43,37],[40,40,43,38],[40,41,43,39],[41,8,44,6],[42,6,45,4],[42,7,45,5],[42,8,45,6],[42,15,45,13,"error"],[42,20,45,18],[42,22,45,20],[43,8,46,6,"console"],[43,15,46,13],[43,16,46,14,"error"],[43,21,46,19],[43,22,46,20],[43,43,46,41],[43,45,46,43,"error"],[43,50,46,48],[43,51,46,49],[44,6,47,4],[44,7,47,5],[44,16,47,14],[45,8,48,6,"setLoading"],[45,18,48,16],[45,19,48,17],[45,24,48,22],[45,25,48,23],[46,6,49,4],[47,4,50,2],[47,5,50,3],[48,4,52,2],[48,10,52,8,"login"],[48,15,52,13],[48,18,52,16],[48,24,52,16,"login"],[48,25,52,23,"username"],[48,33,52,39],[48,35,52,41,"password"],[48,43,52,57],[48,48,52,62],[49,6,53,4],[49,10,53,8],[50,8,54,6,"console"],[50,15,54,13],[50,16,54,14,"log"],[50,19,54,17],[50,20,54,18],[50,56,54,54],[50,58,54,56],[50,61,54,59,"API_URL"],[50,68,54,66],[50,81,54,79],[50,82,54,80],[51,8,55,6],[51,14,55,12,"response"],[51,22,55,20],[51,25,55,23],[51,31,55,29,"axios"],[51,36,55,34],[51,37,55,34,"default"],[51,44,55,34],[51,45,55,35,"post"],[51,49,55,39],[51,50,55,40],[51,53,55,43,"API_URL"],[51,60,55,50],[51,73,55,63],[51,75,55,65],[52,10,56,8,"username"],[52,18,56,16],[53,10,57,8,"password"],[54,8,58,6],[54,9,58,7],[54,10,58,8],[55,8,60,6,"console"],[55,15,60,13],[55,16,60,14,"log"],[55,19,60,17],[55,20,60,18],[55,52,60,50],[55,53,60,51],[56,8,61,6],[56,14,61,12],[57,10,61,14,"access_token"],[57,22,61,26],[58,10,61,28,"user"],[58,14,61,32],[58,16,61,34,"userData"],[59,8,61,43],[59,9,61,44],[59,12,61,47,"response"],[59,20,61,55],[59,21,61,56,"data"],[59,25,61,60],[60,8,63,6],[60,14,63,12,"AsyncStorage"],[60,26,63,24],[60,27,63,24,"default"],[60,34,63,24],[60,35,63,25,"setItem"],[60,42,63,32],[60,43,63,33],[60,50,63,40],[60,52,63,42,"access_token"],[60,64,63,54],[60,65,63,55],[61,8,64,6],[61,14,64,12,"AsyncStorage"],[61,26,64,24],[61,27,64,24,"default"],[61,34,64,24],[61,35,64,25,"setItem"],[61,42,64,32],[61,43,64,33],[61,49,64,39],[61,51,64,41,"JSON"],[61,55,64,45],[61,56,64,46,"stringify"],[61,65,64,55],[61,66,64,56,"userData"],[61,74,64,64],[61,75,64,65],[61,76,64,66],[62,8,66,6,"setToken"],[62,16,66,14],[62,17,66,15,"access_token"],[62,29,66,27],[62,30,66,28],[63,8,67,6,"setUser"],[63,15,67,13],[63,16,67,14,"userData"],[63,24,67,22],[63,25,67,23],[64,6,68,4],[64,7,68,5],[64,8,68,6],[64,15,68,13,"error"],[64,20,68,23],[64,22,68,25],[65,8,69,6,"console"],[65,15,69,13],[65,16,69,14,"error"],[65,21,69,19],[65,22,69,20],[65,50,69,48],[65,52,69,50,"error"],[65,57,69,55],[65,58,69,56],[66,8,70,6,"console"],[66,15,70,13],[66,16,70,14,"error"],[66,21,70,19],[66,22,70,20],[66,53,70,51],[66,55,70,53,"error"],[66,60,70,58],[66,61,70,59,"response"],[66,69,70,67],[66,71,70,69,"data"],[66,75,70,73],[66,76,70,74],[67,8,71,6,"console"],[67,15,71,13],[67,16,71,14,"error"],[67,21,71,19],[67,22,71,20],[67,52,71,50],[67,54,71,52,"error"],[67,59,71,57],[67,60,71,58,"message"],[67,67,71,65],[67,68,71,66],[68,8,72,6],[68,14,72,12],[68,18,72,16,"Error"],[68,23,72,21],[68,24,72,22,"error"],[68,29,72,27],[68,30,72,28,"response"],[68,38,72,36],[68,40,72,38,"data"],[68,44,72,42],[68,46,72,44,"detail"],[68,52,72,50],[68,56,72,54,"error"],[68,61,72,59],[68,62,72,60,"message"],[68,69,72,67],[68,73,72,71],[68,98,72,96],[68,99,72,97],[69,6,73,4],[70,4,74,2],[70,5,74,3],[71,4,76,2],[71,10,76,8,"logout"],[71,16,76,14],[71,19,76,17],[71,25,76,17,"logout"],[71,26,76,17],[71,31,76,29],[72,6,77,4],[72,10,77,8],[73,8,78,6],[73,14,78,12,"AsyncStorage"],[73,26,78,24],[73,27,78,24,"default"],[73,34,78,24],[73,35,78,25,"removeItem"],[73,45,78,35],[73,46,78,36],[73,53,78,43],[73,54,78,44],[74,8,79,6],[74,14,79,12,"AsyncStorage"],[74,26,79,24],[74,27,79,24,"default"],[74,34,79,24],[74,35,79,25,"removeItem"],[74,45,79,35],[74,46,79,36],[74,52,79,42],[74,53,79,43],[75,8,80,6,"setToken"],[75,16,80,14],[75,17,80,15],[75,21,80,19],[75,22,80,20],[76,8,81,6,"setUser"],[76,15,81,13],[76,16,81,14],[76,20,81,18],[76,21,81,19],[77,6,82,4],[77,7,82,5],[77,8,82,6],[77,15,82,13,"error"],[77,20,82,18],[77,22,82,20],[78,8,83,6,"console"],[78,15,83,13],[78,16,83,14,"error"],[78,21,83,19],[78,22,83,20],[78,37,83,35],[78,39,83,37,"error"],[78,44,83,42],[78,45,83,43],[79,6,84,4],[80,4,85,2],[80,5,85,3],[81,4,87,2],[81,24,88,4],[81,28,88,4,"_reactJsxDevRuntime"],[81,47,88,4],[81,48,88,4,"jsxDEV"],[81,54,88,4],[81,56,88,5,"AuthContext"],[81,67,88,16],[81,68,88,17,"Provider"],[81,76,88,25],[82,6,88,26,"value"],[82,11,88,31],[82,13,88,33],[83,8,88,35,"user"],[83,12,88,39],[84,8,88,41,"token"],[84,13,88,46],[85,8,88,48,"login"],[85,13,88,53],[86,8,88,55,"logout"],[86,14,88,61],[87,8,88,63,"loading"],[88,6,88,71],[88,7,88,73],[89,6,88,73,"children"],[89,14,88,73],[89,16,89,7,"children"],[90,4,89,15],[91,6,89,15,"fileName"],[91,14,89,15],[91,16,89,15,"_jsxFileName"],[91,28,89,15],[92,6,89,15,"lineNumber"],[92,16,89,15],[93,6,89,15,"columnNumber"],[93,18,89,15],[94,4,89,15],[94,11,90,26],[94,12,90,27],[95,2,92,0],[96,2,94,7],[96,11,94,16,"useAuth"],[96,18,94,23,"useAuth"],[96,19,94,23],[96,21,94,26],[97,4,95,2],[97,10,95,8,"context"],[97,17,95,15],[97,20,95,18],[97,24,95,18,"useContext"],[97,30,95,28],[97,31,95,28,"useContext"],[97,41,95,28],[97,43,95,29,"AuthContext"],[97,54,95,40],[97,55,95,41],[98,4,96,2],[98,8,96,6,"context"],[98,15,96,13],[98,20,96,18,"undefined"],[98,29,96,27],[98,31,96,29],[99,6,97,4],[99,12,97,10],[99,16,97,14,"Error"],[99,21,97,19],[99,22,97,20],[99,67,97,65],[99,68,97,66],[100,4,98,2],[101,4,99,2],[101,11,99,9,"context"],[101,18,99,16],[102,2,100,0],[103,0,100,1],[103,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFc;gBGE;GHsB;iBIE;GJS;CDO;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}