{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _axios = require(_dependencyMap[3], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = (_expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://taxistas-asturias.preview.emergentagent.com') + '/api';\n  console.log('[AuthContext] API_URL:', API_URL);\n  console.log('[AuthContext] EXPO_PUBLIC_BACKEND_URL:', _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL);\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (username, password) => {\n      try {\n        console.log('[AuthContext] Attempting login to:', `${API_URL}/auth/login`);\n        const response = await axios.default.post(`${API_URL}/auth/login`, {\n          username,\n          password\n        });\n        console.log('[AuthContext] Login successful');\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setToken(access_token);\n        setUser(userData);\n      } catch (error) {\n        console.error('[AuthContext] Login error:', error);\n        console.error('[AuthContext] Error response:', error.response?.data);\n        console.error('[AuthContext] Error message:', error.message);\n        throw new Error(error.response?.data?.detail || error.message || 'Error al iniciar sesiÃ³n');\n      }\n    };\n    const logout = async () => {\n      try {\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n        setToken(null);\n        setUser(null);\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":113,"map":[[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"AuthProvider"],[15,22,27,0],[15,25,27,0,"AuthProvider"],[15,37,27,0],[16,2,94,0,"exports"],[16,9,94,0],[16,10,94,0,"useAuth"],[16,17,94,0],[16,20,94,0,"useAuth"],[16,27,94,0],[17,2,100,1],[17,6,100,1,"_expoVirtualEnv"],[17,21,100,1],[17,24,100,1,"require"],[17,31,100,1],[17,32,100,1,"_dependencyMap"],[17,46,100,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_axios"],[21,12,3,0],[21,15,3,0,"require"],[21,22,3,0],[21,23,3,0,"_dependencyMap"],[21,37,3,0],[22,2,3,0],[22,6,3,0,"axios"],[22,11,3,0],[22,14,3,0,"_interopDefault"],[22,29,3,0],[22,30,3,0,"_axios"],[22,36,3,0],[23,2,3,26],[23,6,3,26,"_reactJsxDevRuntime"],[23,25,3,26],[23,28,3,26,"require"],[23,35,3,26],[23,36,3,26,"_dependencyMap"],[23,50,3,26],[24,2,6,0],[24,8,6,6,"API_URL"],[24,15,6,13],[24,18,6,16],[24,19,6,17,"_expoVirtualEnv"],[24,34,6,17],[24,35,6,17,"env"],[24,38,6,17],[24,39,6,17,"EXPO_PUBLIC_BACKEND_URL"],[24,62,6,17],[24,66,6,56],[24,119,6,109],[24,123,6,113],[24,129,6,119],[25,2,7,0,"console"],[25,9,7,7],[25,10,7,8,"log"],[25,13,7,11],[25,14,7,12],[25,38,7,36],[25,40,7,38,"API_URL"],[25,47,7,45],[25,48,7,46],[26,2,8,0,"console"],[26,9,8,7],[26,10,8,8,"log"],[26,13,8,11],[26,14,8,12],[26,54,8,52],[26,56,8,52,"_expoVirtualEnv"],[26,71,8,52],[26,72,8,52,"env"],[26,75,8,52],[26,76,8,52,"EXPO_PUBLIC_BACKEND_URL"],[26,99,8,89],[26,100,8,90],[27,2,25,0],[27,8,25,6,"AuthContext"],[27,19,25,17],[27,35,25,20],[27,39,25,20,"createContext"],[27,45,25,33],[27,46,25,33,"createContext"],[27,59,25,33],[27,61,25,63,"undefined"],[27,70,25,72],[27,71,25,73],[28,2,27,7],[28,11,27,16,"AuthProvider"],[28,23,27,28,"AuthProvider"],[28,24,27,29],[29,4,27,31,"children"],[30,2,27,71],[30,3,27,72],[30,5,27,74],[31,4,27,74,"_s"],[31,6,27,74],[32,4,28,2],[32,10,28,8],[32,11,28,9,"user"],[32,15,28,13],[32,17,28,15,"setUser"],[32,24,28,22],[32,25,28,23],[32,28,28,26],[32,32,28,26,"useState"],[32,38,28,34],[32,39,28,34,"useState"],[32,47,28,34],[32,49,28,48],[32,53,28,52],[32,54,28,53],[33,4,29,2],[33,10,29,8],[33,11,29,9,"token"],[33,16,29,14],[33,18,29,16,"setToken"],[33,26,29,24],[33,27,29,25],[33,30,29,28],[33,34,29,28,"useState"],[33,40,29,36],[33,41,29,36,"useState"],[33,49,29,36],[33,51,29,52],[33,55,29,56],[33,56,29,57],[34,4,30,2],[34,10,30,8],[34,11,30,9,"loading"],[34,18,30,16],[34,20,30,18,"setLoading"],[34,30,30,28],[34,31,30,29],[34,34,30,32],[34,38,30,32,"useState"],[34,44,30,40],[34,45,30,40,"useState"],[34,53,30,40],[34,55,30,41],[34,59,30,45],[34,60,30,46],[35,4,32,2],[35,8,32,2,"useEffect"],[35,14,32,11],[35,15,32,11,"useEffect"],[35,24,32,11],[35,26,32,12],[35,32,32,18],[36,6,33,4,"loadStoredAuth"],[36,20,33,18],[36,21,33,19],[36,22,33,20],[37,4,34,2],[37,5,34,3],[37,7,34,5],[37,9,34,7],[37,10,34,8],[38,4,36,2],[38,10,36,8,"loadStoredAuth"],[38,24,36,22],[38,27,36,25],[38,33,36,25,"loadStoredAuth"],[38,34,36,25],[38,39,36,37],[39,6,37,4],[39,10,37,8],[40,8,38,6],[40,14,38,12,"storedToken"],[40,25,38,23],[40,28,38,26],[40,34,38,32,"AsyncStorage"],[40,46,38,44],[40,47,38,44,"default"],[40,54,38,44],[40,55,38,45,"getItem"],[40,62,38,52],[40,63,38,53],[40,70,38,60],[40,71,38,61],[41,8,39,6],[41,14,39,12,"storedUser"],[41,24,39,22],[41,27,39,25],[41,33,39,31,"AsyncStorage"],[41,45,39,43],[41,46,39,43,"default"],[41,53,39,43],[41,54,39,44,"getItem"],[41,61,39,51],[41,62,39,52],[41,68,39,58],[41,69,39,59],[42,8,41,6],[42,12,41,10,"storedToken"],[42,23,41,21],[42,27,41,25,"storedUser"],[42,37,41,35],[42,39,41,37],[43,10,42,8,"setToken"],[43,18,42,16],[43,19,42,17,"storedToken"],[43,30,42,28],[43,31,42,29],[44,10,43,8,"setUser"],[44,17,43,15],[44,18,43,16,"JSON"],[44,22,43,20],[44,23,43,21,"parse"],[44,28,43,26],[44,29,43,27,"storedUser"],[44,39,43,37],[44,40,43,38],[44,41,43,39],[45,8,44,6],[46,6,45,4],[46,7,45,5],[46,8,45,6],[46,15,45,13,"error"],[46,20,45,18],[46,22,45,20],[47,8,46,6,"console"],[47,15,46,13],[47,16,46,14,"error"],[47,21,46,19],[47,22,46,20],[47,43,46,41],[47,45,46,43,"error"],[47,50,46,48],[47,51,46,49],[48,6,47,4],[48,7,47,5],[48,16,47,14],[49,8,48,6,"setLoading"],[49,18,48,16],[49,19,48,17],[49,24,48,22],[49,25,48,23],[50,6,49,4],[51,4,50,2],[51,5,50,3],[52,4,52,2],[52,10,52,8,"login"],[52,15,52,13],[52,18,52,16],[52,24,52,16,"login"],[52,25,52,23,"username"],[52,33,52,39],[52,35,52,41,"password"],[52,43,52,57],[52,48,52,62],[53,6,53,4],[53,10,53,8],[54,8,54,6,"console"],[54,15,54,13],[54,16,54,14,"log"],[54,19,54,17],[54,20,54,18],[54,56,54,54],[54,58,54,56],[54,61,54,59,"API_URL"],[54,68,54,66],[54,81,54,79],[54,82,54,80],[55,8,55,6],[55,14,55,12,"response"],[55,22,55,20],[55,25,55,23],[55,31,55,29,"axios"],[55,36,55,34],[55,37,55,34,"default"],[55,44,55,34],[55,45,55,35,"post"],[55,49,55,39],[55,50,55,40],[55,53,55,43,"API_URL"],[55,60,55,50],[55,73,55,63],[55,75,55,65],[56,10,56,8,"username"],[56,18,56,16],[57,10,57,8,"password"],[58,8,58,6],[58,9,58,7],[58,10,58,8],[59,8,60,6,"console"],[59,15,60,13],[59,16,60,14,"log"],[59,19,60,17],[59,20,60,18],[59,52,60,50],[59,53,60,51],[60,8,61,6],[60,14,61,12],[61,10,61,14,"access_token"],[61,22,61,26],[62,10,61,28,"user"],[62,14,61,32],[62,16,61,34,"userData"],[63,8,61,43],[63,9,61,44],[63,12,61,47,"response"],[63,20,61,55],[63,21,61,56,"data"],[63,25,61,60],[64,8,63,6],[64,14,63,12,"AsyncStorage"],[64,26,63,24],[64,27,63,24,"default"],[64,34,63,24],[64,35,63,25,"setItem"],[64,42,63,32],[64,43,63,33],[64,50,63,40],[64,52,63,42,"access_token"],[64,64,63,54],[64,65,63,55],[65,8,64,6],[65,14,64,12,"AsyncStorage"],[65,26,64,24],[65,27,64,24,"default"],[65,34,64,24],[65,35,64,25,"setItem"],[65,42,64,32],[65,43,64,33],[65,49,64,39],[65,51,64,41,"JSON"],[65,55,64,45],[65,56,64,46,"stringify"],[65,65,64,55],[65,66,64,56,"userData"],[65,74,64,64],[65,75,64,65],[65,76,64,66],[66,8,66,6,"setToken"],[66,16,66,14],[66,17,66,15,"access_token"],[66,29,66,27],[66,30,66,28],[67,8,67,6,"setUser"],[67,15,67,13],[67,16,67,14,"userData"],[67,24,67,22],[67,25,67,23],[68,6,68,4],[68,7,68,5],[68,8,68,6],[68,15,68,13,"error"],[68,20,68,23],[68,22,68,25],[69,8,69,6,"console"],[69,15,69,13],[69,16,69,14,"error"],[69,21,69,19],[69,22,69,20],[69,50,69,48],[69,52,69,50,"error"],[69,57,69,55],[69,58,69,56],[70,8,70,6,"console"],[70,15,70,13],[70,16,70,14,"error"],[70,21,70,19],[70,22,70,20],[70,53,70,51],[70,55,70,53,"error"],[70,60,70,58],[70,61,70,59,"response"],[70,69,70,67],[70,71,70,69,"data"],[70,75,70,73],[70,76,70,74],[71,8,71,6,"console"],[71,15,71,13],[71,16,71,14,"error"],[71,21,71,19],[71,22,71,20],[71,52,71,50],[71,54,71,52,"error"],[71,59,71,57],[71,60,71,58,"message"],[71,67,71,65],[71,68,71,66],[72,8,72,6],[72,14,72,12],[72,18,72,16,"Error"],[72,23,72,21],[72,24,72,22,"error"],[72,29,72,27],[72,30,72,28,"response"],[72,38,72,36],[72,40,72,38,"data"],[72,44,72,42],[72,46,72,44,"detail"],[72,52,72,50],[72,56,72,54,"error"],[72,61,72,59],[72,62,72,60,"message"],[72,69,72,67],[72,73,72,71],[72,98,72,96],[72,99,72,97],[73,6,73,4],[74,4,74,2],[74,5,74,3],[75,4,76,2],[75,10,76,8,"logout"],[75,16,76,14],[75,19,76,17],[75,25,76,17,"logout"],[75,26,76,17],[75,31,76,29],[76,6,77,4],[76,10,77,8],[77,8,78,6],[77,14,78,12,"AsyncStorage"],[77,26,78,24],[77,27,78,24,"default"],[77,34,78,24],[77,35,78,25,"removeItem"],[77,45,78,35],[77,46,78,36],[77,53,78,43],[77,54,78,44],[78,8,79,6],[78,14,79,12,"AsyncStorage"],[78,26,79,24],[78,27,79,24,"default"],[78,34,79,24],[78,35,79,25,"removeItem"],[78,45,79,35],[78,46,79,36],[78,52,79,42],[78,53,79,43],[79,8,80,6,"setToken"],[79,16,80,14],[79,17,80,15],[79,21,80,19],[79,22,80,20],[80,8,81,6,"setUser"],[80,15,81,13],[80,16,81,14],[80,20,81,18],[80,21,81,19],[81,6,82,4],[81,7,82,5],[81,8,82,6],[81,15,82,13,"error"],[81,20,82,18],[81,22,82,20],[82,8,83,6,"console"],[82,15,83,13],[82,16,83,14,"error"],[82,21,83,19],[82,22,83,20],[82,37,83,35],[82,39,83,37,"error"],[82,44,83,42],[82,45,83,43],[83,6,84,4],[84,4,85,2],[84,5,85,3],[85,4,87,2],[85,24,88,4],[85,28,88,4,"_reactJsxDevRuntime"],[85,47,88,4],[85,48,88,4,"jsxDEV"],[85,54,88,4],[85,56,88,5,"AuthContext"],[85,67,88,16],[85,68,88,17,"Provider"],[85,76,88,25],[86,6,88,26,"value"],[86,11,88,31],[86,13,88,33],[87,8,88,35,"user"],[87,12,88,39],[88,8,88,41,"token"],[88,13,88,46],[89,8,88,48,"login"],[89,13,88,53],[90,8,88,55,"logout"],[90,14,88,61],[91,8,88,63,"loading"],[92,6,88,71],[92,7,88,73],[93,6,88,73,"children"],[93,14,88,73],[93,16,89,7,"children"],[94,4,89,15],[95,6,89,15,"fileName"],[95,14,89,15],[95,16,89,15,"_jsxFileName"],[95,28,89,15],[96,6,89,15,"lineNumber"],[96,16,89,15],[97,6,89,15,"columnNumber"],[97,18,89,15],[98,4,89,15],[98,11,90,26],[98,12,90,27],[99,2,92,0],[100,2,92,1,"_s"],[100,4,92,1],[100,5,27,16,"AuthProvider"],[100,17,27,28],[101,2,27,28,"_c"],[101,4,27,28],[101,7,27,16,"AuthProvider"],[101,19,27,28],[102,2,94,7],[102,11,94,16,"useAuth"],[102,18,94,23,"useAuth"],[102,19,94,23],[102,21,94,26],[103,4,94,26,"_s2"],[103,7,94,26],[104,4,95,2],[104,10,95,8,"context"],[104,17,95,15],[104,20,95,18],[104,24,95,18,"useContext"],[104,30,95,28],[104,31,95,28,"useContext"],[104,41,95,28],[104,43,95,29,"AuthContext"],[104,54,95,40],[104,55,95,41],[105,4,96,2],[105,8,96,6,"context"],[105,15,96,13],[105,20,96,18,"undefined"],[105,29,96,27],[105,31,96,29],[106,6,97,4],[106,12,97,10],[106,16,97,14,"Error"],[106,21,97,19],[106,22,97,20],[106,67,97,65],[106,68,97,66],[107,4,98,2],[108,4,99,2],[108,11,99,9,"context"],[108,18,99,16],[109,2,100,0],[110,2,100,1,"_s2"],[110,5,100,1],[110,6,94,16,"useAuth"],[110,13,94,23],[111,2,94,23],[111,6,94,23,"_c"],[111,8,94,23],[112,2,94,23,"$RefreshReg$"],[112,14,94,23],[112,15,94,23,"_c"],[112,17,94,23],[113,0,94,23],[113,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;OC0B;YCK;GDE;yBEE;GFc;gBGE;GHsB;iBIE;GJS;CDO;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}